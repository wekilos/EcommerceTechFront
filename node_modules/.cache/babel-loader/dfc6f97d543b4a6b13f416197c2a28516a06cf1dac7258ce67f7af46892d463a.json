{"ast":null,"code":"import _regeneratorRuntime from\"/Users/wekilos1902gmail.com/Desktop/Begnazar/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/wekilos1902gmail.com/Desktop/Begnazar/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _toConsumableArray from\"/Users/wekilos1902gmail.com/Desktop/Begnazar/frontend/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _slicedToArray from\"/Users/wekilos1902gmail.com/Desktop/Begnazar/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect,createContext}from\"react\";import{isLogin}from\"../utils\";import{axiosInstance}from\"../utils/axiosIntance\";import{jsx as _jsx}from\"react/jsx-runtime\";export var Context=/*#__PURE__*/createContext();var ContextProvider=function ContextProvider(props){var localPro;var localProduct=localStorage.getItem(\"BasketProducts\");//-----------------------------------------------------------------\nvar _useState=useState(false),_useState2=_slicedToArray(_useState,2),is_logged=_useState2[0],set_is_logged=_useState2[1];//-----------------------------------------------------------------\nif(localProduct){localPro=JSON.parse(localProduct);}else{localPro=[];}var _useState3=useState(localPro),_useState4=_slicedToArray(_useState3,2),basket=_useState4[0],setBasket=_useState4[1];var checkLogin=function checkLogin(){var data=JSON.parse(localStorage.getItem(\"userData\"));if((data===null||data===void 0?void 0:data.id)!==undefined)set_is_logged(true);else set_is_logged(false);};useEffect(function(){checkLogin();},[]);useEffect(function(){localStorage.setItem(\"BasketProducts\",JSON.stringify(basket));},[basket]);var _useState5=useState(\"TM\"),_useState6=_slicedToArray(_useState5,2),dil=_useState6[0],setDil=_useState6[1];useEffect(function(){var dilData=localStorage.getItem(\"OnlineDil\");if(dilData){setDil(JSON.parse(dilData));}else{setDil(\"TM\");localStorage.setItem(\"OnlineDil\",JSON.stringify(\"TM\"));}},[]);var ChangeDil=function ChangeDil(event){setDil(event);localStorage.setItem(\"OnlineDil\",JSON.stringify(event));};var addPro=function addPro(pro){console.log(pro);var is_have=false;basket===null||basket===void 0?void 0:basket.map(function(item){if((item===null||item===void 0?void 0:item.ProductId)==(pro===null||pro===void 0?void 0:pro.id)){is_have=true;}});if(is_have){incPro(pro.id);}else{var obj={ProductId:pro===null||pro===void 0?void 0:pro.id,quantity:1,pro:pro};var array=basket;array.push(obj);setBasket(_toConsumableArray(array));}console.log(\"gobasket\",basket);};var removePro=function removePro(proId){console.log(proId);var array=basket.filter(function(item){return proId!=(item===null||item===void 0?void 0:item.ProductId);});setBasket(_toConsumableArray(array));};var incPro=function incPro(proId){console.log(\"inc\",proId);var array=basket;var index=-1;array.map(function(item,i){if(item.ProductId==proId){index=i;}});if(index!=-1){array[index].quantity=array[index].quantity+1;}setBasket(_toConsumableArray(array));};var decPro=function decPro(proId){console.log(\"inc\",proId);var array=basket;var index=-1;array.map(function(item,i){if(item.ProductId==proId){index=i;}});if(index!=-1){array[index].quantity>1?array[index].quantity=array[index].quantity-1:removePro(proId);}setBasket(_toConsumableArray(array));};var removeAll=function removeAll(){setBasket([]);};var countPro=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(id){var count;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:count=0;_context.next=3;return basket===null||basket===void 0?void 0:basket.map(function(item){if(item.ProductId==id){count=item.quantity;}});case 3:return _context.abrupt(\"return\",count);case 4:case\"end\":return _context.stop();}},_callee);}));return function countPro(_x){return _ref.apply(this,arguments);};}();//---------------------------------------------------------------------------------------------\nvar logout=function logout(){localStorage.removeItem(\"BasketProducts\");localStorage.removeItem(\"OnlineDil\");localStorage.removeItem(\"userData\");checkLogin();};//---------------------------------------------------------------------------------------------\nreturn/*#__PURE__*/_jsx(Context.Provider,{value:{is_logged:is_logged,checkLogin:checkLogin,logout:logout,dil:dil,ChangeDil:ChangeDil,addPro:addPro,removePro:removePro,incPro:incPro,decPro:decPro,basket:basket,removeAll:removeAll,countPro:countPro},children:props.children});};export default ContextProvider;","map":{"version":3,"names":["React","useState","useEffect","createContext","isLogin","axiosInstance","jsx","_jsx","Context","ContextProvider","props","localPro","localProduct","localStorage","getItem","_useState","_useState2","_slicedToArray","is_logged","set_is_logged","JSON","parse","_useState3","_useState4","basket","setBasket","checkLogin","data","id","undefined","setItem","stringify","_useState5","_useState6","dil","setDil","dilData","ChangeDil","event","addPro","pro","console","log","is_have","map","item","ProductId","incPro","obj","quantity","array","push","_toConsumableArray","removePro","proId","filter","index","i","decPro","removeAll","countPro","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","count","wrap","_callee$","_context","prev","next","abrupt","stop","_x","apply","arguments","logout","removeItem","Provider","value","children"],"sources":["/Users/wekilos1902gmail.com/Desktop/Begnazar/frontend/src/context/context.js"],"sourcesContent":["import React, { useState, useEffect, createContext } from \"react\";\nimport { isLogin } from \"../utils\";\nimport { axiosInstance } from \"../utils/axiosIntance\";\n\nexport const Context = createContext();\n\nconst ContextProvider = (props) => {\n  let localPro;\n  const localProduct = localStorage.getItem(\"BasketProducts\");\n\n  //-----------------------------------------------------------------\n  const [is_logged, set_is_logged] = useState(false);\n  //-----------------------------------------------------------------\n\n  if (localProduct) {\n    localPro = JSON.parse(localProduct);\n  } else {\n    localPro = [];\n  }\n\n  const [basket, setBasket] = useState(localPro);\n\n  const checkLogin = () => {\n    const data = JSON.parse(localStorage.getItem(\"userData\"));\n    if (data?.id !== undefined) set_is_logged(true);\n    else set_is_logged(false);\n  };\n\n  useEffect(() => {\n    checkLogin();\n  }, []);\n\n  useEffect(() => {\n    localStorage.setItem(\"BasketProducts\", JSON.stringify(basket));\n  }, [basket]);\n\n  let [dil, setDil] = useState(\"TM\");\n  useEffect(() => {\n    let dilData = localStorage.getItem(\"OnlineDil\");\n    if (dilData) {\n      setDil(JSON.parse(dilData));\n    } else {\n      setDil(\"TM\");\n      localStorage.setItem(\"OnlineDil\", JSON.stringify(\"TM\"));\n    }\n  }, []);\n\n  const ChangeDil = (event) => {\n    setDil(event);\n    localStorage.setItem(\"OnlineDil\", JSON.stringify(event));\n  };\n\n  const addPro = (pro) => {\n    console.log(pro);\n    let is_have = false;\n    basket?.map((item) => {\n      if (item?.ProductId == pro?.id) {\n        is_have = true;\n      }\n    });\n\n    if (is_have) {\n      incPro(pro.id);\n    } else {\n      let obj = {\n        ProductId: pro?.id,\n        quantity: 1,\n        pro: pro,\n      };\n      let array = basket;\n      array.push(obj);\n      setBasket([...array]);\n    }\n    console.log(\"gobasket\", basket);\n  };\n\n  const removePro = (proId) => {\n    console.log(proId);\n    let array = basket.filter((item) => {\n      return proId != item?.ProductId;\n    });\n    setBasket([...array]);\n  };\n\n  const incPro = (proId) => {\n    console.log(\"inc\", proId);\n    let array = basket;\n    let index = -1;\n    array.map((item, i) => {\n      if (item.ProductId == proId) {\n        index = i;\n      }\n    });\n    if (index != -1) {\n      array[index].quantity = array[index].quantity + 1;\n    }\n    setBasket([...array]);\n  };\n  const decPro = (proId) => {\n    console.log(\"inc\", proId);\n    let array = basket;\n    let index = -1;\n    array.map((item, i) => {\n      if (item.ProductId == proId) {\n        index = i;\n      }\n    });\n    if (index != -1) {\n      array[index].quantity > 1\n        ? (array[index].quantity = array[index].quantity - 1)\n        : removePro(proId);\n    }\n    setBasket([...array]);\n  };\n\n  const removeAll = () => {\n    setBasket([]);\n  };\n\n  const countPro = async (id) => {\n    let count = 0;\n    await basket?.map((item) => {\n      if (item.ProductId == id) {\n        count = item.quantity;\n      }\n    });\n    return count;\n  };\n  //---------------------------------------------------------------------------------------------\n  const logout = () => {\n    localStorage.removeItem(\"BasketProducts\");\n    localStorage.removeItem(\"OnlineDil\");\n    localStorage.removeItem(\"userData\");\n    checkLogin();\n  };\n\n  //---------------------------------------------------------------------------------------------\n\n  return (\n    <Context.Provider\n      value={{\n        is_logged,\n        checkLogin,\n        logout,\n        dil,\n        ChangeDil,\n        addPro,\n        removePro,\n        incPro,\n        decPro,\n        basket,\n        removeAll,\n        countPro,\n      }}\n    >\n      {props.children}\n    </Context.Provider>\n  );\n};\n\nexport default ContextProvider;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}